"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[655],{2655:function(e,r,n){n.d(r,{E:function(){return ee},$:function(){return L}});var t=n(5893),o=n(1664),i=n.n(o),a=n(8527),u=n(5193),c=n(9609),l=n(7657),s=n(1358),f=n(9762),m=n(4612),d=n(3307),h=n(4051),p=n.n(h),b=n(7294),y=n(1163),g=n(7536),x=n(4231),v=n(5496),j=n(7375),w=n(8843),k=n(1153);function S(e,r,n,t,o,i,a){try{var u=e[i](a),c=u.value}catch(l){return void n(l)}u.done?r(c):Promise.resolve(c).then(t,o)}var I=function(){var e,r=(e=p().mark((function e(r,n){var t,o,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,k.cF)(),o=(0,k.iH)(t,"images/".concat(n,"/").concat(encodeURI(r.name))),e.next=4,(0,k.KV)(o,r).then((function(){return(0,k.Jt)(o)}));case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function a(e){S(i,t,o,a,u,"next",e)}function u(e){S(i,t,o,a,u,"throw",e)}a(void 0)}))});return function(e,n){return r.apply(this,arguments)}}();function O(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function C(e,r,n,t,o,i,a){try{var u=e[i](a),c=u.value}catch(l){return void n(l)}u.done?r(c):Promise.resolve(c).then(t,o)}function E(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function a(e){C(i,t,o,a,u,"next",e)}function u(e){C(i,t,o,a,u,"throw",e)}a(void 0)}))}}function A(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function P(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){A(e,r,n[r])}))}return e}function D(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return O(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=x.Ry({title:x.Z_().required("\u65c5\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),date:x.IX(),thumbnail:x.Z_().nullable(),links:x.IX().of(x.Ry().shape({url:x.Z_().required("url\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").matches(/^(https?|ftp)(:\/\/[-_.!~*'()a-zA-Z0-9;/?:@&=+$,%#]+)/,{message:"\u5229\u7528\u53ef\u80fd\u306aURL\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),label:x.Z_()}))});function T(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function U(e,r,n,t,o,i,a){try{var u=e[i](a),c=u.value}catch(l){return void n(l)}u.done?r(c):Promise.resolve(c).then(t,o)}function z(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function a(e){U(i,t,o,a,u,"next",e)}function u(e){U(i,t,o,a,u,"throw",e)}a(void 0)}))}}function Z(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function F(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){Z(e,r,n[r])}))}return e}function B(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return T(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=x.Ry({name:x.Z_().required("\u30cb\u30c3\u30af\u30cd\u30fc\u30e0\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),icon:x.Z_().nullable()});function _(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function q(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){_(e,r,n[r])}))}return e}var L=function(e){var r,n=e.data,o=function(e){var r,n=(0,y.useRouter)(),t=n.query.isFirst,o=B((0,j.kt)(),2),i=o[0],a=o[1],u=B((0,j.kt)(),2),c=u[0],l=u[1],s=w.O2,f=I,m=w.Io,d=(0,g.cI)({resolver:(0,v.X)(N),defaultValues:{name:e.name,icon:null!==(r=e.icon)&&void 0!==r?r:""}}),h=d.register,b=d.handleSubmit,x=d.setValue,k=d.control,S=d.formState.errors,O=(0,g.qo)({control:k,name:"icon"}),C=function(){var e=z(p().mark((function e(r){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.on(),!r.currentTarget.files){e.next=9;break}return e.next=4,f(r.currentTarget.files[0],"users");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0="";case 7:n=e.t0,x("icon",n);case 9:a.off();case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),E=function(){var e=z(p().mark((function e(r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l.on(),!t){e.next=7;break}return e.next=5,A(r);case 5:e.next=9;break;case 7:return e.next=9,P(r);case 9:t&&n.push("/home"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.prev=15,l.off(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(r){return e.apply(this,arguments)}}(),A=function(){var r=z(p().mark((function r(n){return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s(F({},n,{uid:e.uid,isAnonymous:e.isAnonymous}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),P=function(){var r=z(p().mark((function r(n){return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m(F({},n,{uid:e.uid,isAnonymous:e.isAnonymous}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return{register:h,handleSubmit:b,onSubmit:E,errors:S,disabled:c,handleUploadFile:C,isFirst:t,isUploading:i,currentIcon:O}}(n),h=o.register,b=o.handleSubmit,x=o.onSubmit,k=o.errors,S=o.disabled,O=o.handleUploadFile,C=o.isFirst,E=o.currentIcon,A=o.isUploading;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(a.xu,{as:"form",height:"100vh",position:"relative",children:[(0,t.jsxs)(a.kC,{w:"100%",h:"6.3rem",justify:"center",align:"center",children:[!C&&(0,t.jsx)(i(),{href:"/home",passHref:!0,children:(0,t.jsx)(u.hU,{"aria-label":"return",size:"lg",icon:(0,t.jsx)(d.BK,{w:"2.2rem",h:"2.2rem"})})}),(0,t.jsx)(a.LZ,{}),(0,t.jsx)(a.xu,{color:"black",fontSize:"md",fontWeight:"bold",children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"}),(0,t.jsx)(a.LZ,{}),(0,t.jsx)(a.xu,{w:"2.2rem",h:"2.2rem"})]}),(0,t.jsx)(a.kC,{align:"center",justify:"center",children:(0,t.jsx)(a.xu,{borderRadius:"50%",filter:"drop-shadow(4px 4px 10px #E4EBEE);",marginBottom:"2.4rem",bgColor:"base",children:A?(0,t.jsx)(a.kC,{w:"12.9rem",h:"12.9rem",justifyContent:"center",alignItems:"center",flexDirection:"column",bg:"gray",rounded:"full",children:(0,t.jsx)(c.$,{thickness:".4rem",speed:".65s",emptyColor:"gray",color:"brandBlue",w:"6.4rem",h:"6.4rem"})}):(0,t.jsxs)(l.qE,{as:"label",w:"12.9rem",h:"12.9rem",defaultValue:null!==(r=n.icon)&&void 0!==r?r:"",src:E,children:[(0,t.jsx)(s.by,{onChange:O,id:"icon",type:"file",accept:"image/*"}),(0,t.jsx)(s.by,q({},h("icon")))]})})}),(0,t.jsxs)(f.NI,{isInvalid:!!k.name,children:[(0,t.jsx)(f.lX,{htmlFor:"name",fontSize:"md",children:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0"}),(0,t.jsx)(a.kC,{align:"center",justify:"center",children:(0,t.jsx)(m.II,q({variant:"filled",w:"34.4rem",h:"4.6rem",borderRightRadius:"10rem",borderLeftRadius:"10rem",bgColor:"white",filter:"drop-shadow(4px 4px 10px #E4EBEE)"},h("name")))}),(0,t.jsx)(f.J1,{children:k.name&&k.name.message})]}),(0,t.jsx)(u.zx,{position:"absolute",bottom:"12.9rem",right:"50%",transform:"translateX(50%)",disabled:S,variant:"round",onClick:b(x),children:"\u6c7a\u5b9a"})]})})},X=n(9033),V=(n(5828),n(9198)),$=n.n(V),M=n(944);(0,V.registerLocale)("ja",M.Z);var J=function(e){var r=e.name,n=e.control;return(0,t.jsx)(g.Qr,{control:n,name:r,render:function(e){var r=e.field,n=r.onChange,o=r.value,i=void 0===o?[null,null]:o;return(0,t.jsx)($(),{locale:M.Z,selectsRange:!0,dateFormat:"yyyy/MM/dd",onChange:n,startDate:i[0],endDate:i[1],withPortal:!0})}})},K=n(3468),H=n(2770);function W(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Q(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function G(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){Q(e,r,n[r])}))}return e}function Y(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return W(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ee=function(e){var r=e.travelinkData,n=e.userData,o=e.isOwner,u=(0,b.useState)(!!r),l=u[0],h=u[1],x=function(e,r){var n=D((0,j.kt)(),2),t=n[0],o=n[1],i=D((0,j.kt)(),2),a=i[0],u=i[1],c=(0,b.useState)(e?e.links.map((function(e){return e.category})):[]),l=c[0],s=c[1],f=(0,y.useRouter)(),m=f.query.traveliId,d=null===e||void 0===e?void 0:e.date.map((function(e){return e?e.toDate():null})),h=(0,g.cI)({resolver:(0,v.X)(R),defaultValues:P({},e,{date:d||[null,null]})}),x=h.register,k=h.control,S=h.handleSubmit,O=h.setValue,C=h.formState.errors,A=I,T=w.h0,U=w.pz,z=(0,g.Dq)({name:"links",control:k}),Z=z.fields,F=z.append,B=z.remove,N=function(){var e=E(p().mark((function e(r){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.on(),!r.currentTarget.files){e.next=9;break}return e.next=4,A(r.currentTarget.files[0],"links");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0="";case 7:n=e.t0,O("thumbnail",n);case 9:u.off();case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),_=(0,g.qo)({control:k,name:"thumbnail"}),q=function(){var r=E(p().mark((function r(n){var t,i;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=n.links.map((function(e,r){return e.category=l[r],e})),i=P({},n,{links:t}),r.prev=2,o.on(),e){r.next=9;break}return r.next=7,L(i);case 7:r.next=11;break;case 9:return r.next=11,X(i);case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(2),console.error(r.t0);case 16:return r.prev=16,o.off(),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[2,13,16,19]])})));return function(e){return r.apply(this,arguments)}}(),L=function(){var e=E(p().mark((function e(n){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,T(P({},n,{ownerIcon:r.icon?r.icon:"",ownerName:r.name?r.name:""}),r.uid);case 4:t=e.sent,f.push("/".concat(t));case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),X=function(){var e=E(p().mark((function e(r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(r,m);case 2:f.push("/".concat(m));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{register:x,handleSubmit:S,fields:Z,append:F,remove:B,control:k,onSubmit:q,errors:C,disabled:t,handleUploadFile:N,categories:l,setCategories:s,setValue:O,isUploading:a,currentThumbnail:_}}(r,n),k=x.register,S=x.handleSubmit,O=x.fields,C=x.append,A=x.remove,T=x.control,U=x.onSubmit,z=x.errors,Z=x.disabled,F=x.isUploading,B=x.currentThumbnail,N=x.handleUploadFile,_=x.setCategories,q=x.categories,L=x.setValue,V=(0,y.useRouter)().query.traveliId;return(0,t.jsxs)(a.xu,{children:[(0,t.jsxs)(a.kC,{w:"100%",h:"6.3rem",justify:"center",align:"center",children:[(0,t.jsx)(i(),{href:r?"/".concat(V):"/home",children:(0,t.jsx)(a.rU,{children:(0,t.jsx)(d.BK,{bgColor:"none",w:"2.4rem",h:"2.4rem"})})}),(0,t.jsx)(a.LZ,{}),(0,t.jsx)(a.xu,{color:"black",fontSize:"md",fontWeight:"bold",children:"\u65b0\u3057\u3044\u30c8\u30e9\u30d9\u30ea\u30f3\u30af\u3092\u4f5c\u6210"}),(0,t.jsx)(a.LZ,{}),(0,t.jsx)(a.xu,{w:"2.2rem",h:"2.2rem"})]}),(0,t.jsxs)(f.NI,{isInvalid:!!z.title,children:[(0,t.jsx)(f.lX,{marginTop:"1.5rem",fontSize:"sm",color:"#2D2D2D",children:"\u65c5\u306e\u540d\u524d"}),(0,t.jsx)(m.II,G({variant:"filled",h:"4.6rem",marginTop:"0.8rem",borderRightRadius:"10rem",borderLeftRadius:"10rem",bgColor:"white",filter:"drop-shadow(0.4rem 0.4rem 1rem #E4EBEE)"},k("title"),{placeholder:"\u4f8b\uff09\u3068\u3082\u3060\u3061\u3068\u306e\u4e00\u6cca\u4e8c\u65e5\u306e\u65c5\u884c"})),(0,t.jsx)(f.J1,{children:z.title&&z.title.message})]}),(0,t.jsxs)(f.NI,{isInvalid:!!z.date,children:[(0,t.jsx)(f.lX,{marginTop:"1.6rem",fontSize:"sm",color:"#2D2D2D",children:"\u65e5\u6642\uff08\u4efb\u610f\uff09"}),(0,t.jsx)(J,{control:T,name:"date"})]}),(0,t.jsxs)(f.NI,{children:[(0,t.jsx)(f.lX,{marginTop:"1.6rem",fontSize:"sm",color:"#2D2D2D",children:"\u30b5\u30e0\u30cd\u30a4\u30eb\u753b\u50cf\uff08\u4efb\u610f\uff09"}),F?(0,t.jsx)(a.kC,{w:"100%",h:"12.9rem",justifyContent:"center",alignItems:"center",flexDirection:"column",bg:"gray",borderRadius:"1rem",children:(0,t.jsx)(c.$,{thickness:".4rem",speed:".65s",emptyColor:"gray",color:"brandBlue",w:"6.4rem",h:"6.4rem"})}):(0,t.jsxs)(a.xu,{as:"label",display:"block",w:"100%",h:"12.9rem",borderRadius:"1rem",bgColor:"#D2D6E1",marginTop:"0.8rem",bgRepeat:"no-repeat",bgImage:B||(r?r.thumbnail:""),bgSize:"cover",bgPosition:"center center",filter:"drop-shadow(0.4rem 0.4rem 1rem #E4EBEE)",children:[(0,t.jsx)(a.kC,{h:"12.9rem",align:"center",justify:"center",children:(0,t.jsx)(d.Lj,{zIndex:1,w:"4.8rem",h:"4.8rem",color:"white"})}),(0,t.jsx)(s.by,{type:"file",accept:"image/*",onChange:N}),(0,t.jsx)(s.by,G({},k("thumbnail")))]})]}),(0,t.jsx)(a.xu,{margin:"1.6rem 0 0.8rem 0",children:"\u30ea\u30f3\u30af"}),(0,t.jsxs)(f.NI,{children:[O.map((function(e,r){return(0,t.jsx)(b.Fragment,{children:(0,t.jsx)(K.ak,{categories:q,setCategories:_,label:e.label,url:e.url,index:r,register:k,errors:z.links,setValue:L,remove:function(){A(r)},isClickNext:l,setIsClickNext:h,isLast:O.length===r+1})},e.id)})),(0,t.jsxs)(a.kC,{align:"center",justify:"center",marginTop:"1.6rem",color:"brandBlue",children:[(0,t.jsx)(a.xu,{bgImage:"/images/plus.svg",w:"2.4rem",h:"2.4rem"}),(0,t.jsx)(a.xu,{as:"button",fontSize:"md",type:"button",onClick:function(){_((function(e){return Y(e).concat(["\u305d\u306e\u4ed6"])})),h(!0),C({url:"",label:""})},children:"\u30ea\u30b9\u30c8\u306e\u8ffd\u52a0"})]}),(o||!r)&&(0,t.jsxs)(f.NI,{display:"flex",alignItems:"center",paddingTop:"3rem",children:[(0,t.jsx)(X.r,G({sx:{"--switch-track-width":"3.8rem","--switch-track-height":"2rem"},backgroundColor:"#e3e4e5",borderRadius:"full",marginRight:"2.2rem",colorScheme:"brandBlue-switch"},k("canEdit"),{defaultChecked:null===r||void 0===r?void 0:r.canEdit})),(0,t.jsx)(f.lX,{children:"\u4ed6\u306e\u30e6\u30fc\u30b6\u306b\u7de8\u96c6\u3092\u8a31\u53ef\u3059\u308b"})]})]}),(0,t.jsx)(a.kC,{justify:"center",margin:"3rem 0 3.5rem 0",children:(0,t.jsx)(H.zx,{disabled:Z,variant:"round",onClick:S(U),children:r?"\u5909\u66f4\u3059\u308b":"\u4f5c\u6210\u3059\u308b"})})]})}}}]);