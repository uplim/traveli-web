"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[468],{9468:function(e,r,n){n.d(r,{Ry:function(){return m},ak:function(){return h},YS:function(){return o}});var t=n(5893),a=n(8527),o=function(e){var r=e.label,n=e.url,o=e.onClick;return void 0==o&&(o=function(){window.open(n)}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(a.kC,{position:"relative",top:0,left:0,w:"100%",h:"5.2rem",borderRadius:"10rem",bgColor:"white",filter:"drop-shadow(4px 4px 10px #E4EBEE)",align:"center",marginBottom:"1rem",onClick:o,children:[(0,t.jsx)(a.xu,{backgroundColor:"gray",borderRadius:"100%",w:"3.8rem",h:"3.8rem",marginLeft:"0.7rem"}),(0,t.jsx)(a.xv,{w:"80%",textAlign:"center",fontSize:"md",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",margin:"0 1.6rem",children:r})]})})},i=n(1997),u=n(3832),l=n(9762),c=n(4612);function s(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){s(e,r,n[r])}))}return e}var m=function(e){var r,n,o,s,m=e.label,d=e.url,h=e.index,p=e.formType,v=e.travelinkData,b=e.ownerProfile,g=e.remove,y=e.setCurrentLabel,x=e.setCurrentURL,w=e.setState,j=(0,i.j)(p,v,b),S=j.register,k=j.errors;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.xu,{children:(0,t.jsxs)(a.xu,{marginTop:"0.4rem",padding:"1.4rem 1.6rem 0 1.6rem",w:"100%",h:"27.4rem",borderRadius:"1.5rem",bgColor:"white",filter:"drop-shadow(0.4rem 0.4rem 1rem #E4EBEE)",children:[(0,t.jsxs)(u.v2,{children:[(0,t.jsxs)(a.kC,{children:[(0,t.jsx)(a.LZ,{}),(0,t.jsx)(u.j2,{children:(0,t.jsx)(a.kC,{bgColor:"#E8ECF0",borderRadius:"full",w:"3.6rem",h:"3.6rem",align:"center",justify:"center",children:(0,t.jsx)(a.xu,{bgImage:"/images/menuButton.svg",w:"2.4rem",h:"2.4rem"})})})]}),(0,t.jsxs)(u.qy,{padding:"1.35rem 0 0 2.4rem",w:"16.8rem",h:"8.8rem",borderColor:"#CBD5E0",borderRadius:"1.5rem",boxShadow:0,children:[(0,t.jsxs)(u.sN,{display:"flex",padding:"0 0 1.35rem 0",onClick:function(){w(),""==m&&y(d)},children:[(0,t.jsx)(a.xu,{bgImage:"/images/closeMenu.svg",w:"1.5rem",h:"1.5rem",marginRight:"1.6rem"}),(0,t.jsx)(a.xu,{fontSize:"sm",children:"\u8868\u793a\u3092\u6700\u5c0f\u5316"})]}),(0,t.jsxs)(u.sN,{display:"flex",padding:0,onClick:function(){g()},children:[(0,t.jsx)(a.xu,{bgImage:"/images/trash.svg",w:"1.68rem",h:"1.68rem",marginRight:"1.6rem"}),(0,t.jsx)(a.xu,{fontSize:"sm",color:"#FF4D4D",children:"\u524a\u9664\u3059\u308b"})]})]})]}),(0,t.jsx)(a.xu,{children:"\u30ab\u30c6\u30b4\u30ea"}),(0,t.jsx)(a.aV,{children:(0,t.jsxs)(a.HC,{children:[(0,t.jsxs)(l.NI,{isInvalid:!!k.links,children:[(0,t.jsx)(l.lX,{h:"1.6rem",fontSize:"sm",color:"#2D2D2D",children:"URL"}),(0,t.jsx)(c.II,f({marginTop:"0.3rem",marginBottom:"1.6rem",variant:"outline",borderColor:"#ACC1CA",w:"100%",h:"4.4rem",borderRightRadius:"10rem",borderLeftRadius:"10rem",isInvalid:!!(null===(r=k.links)||void 0===r?void 0:r[h])},S("links.".concat(h,".url")),{defaultValue:d,onChange:function(e){x(e.target.value)},placeholder:"https://"})),(0,t.jsx)(l.J1,{children:(null===(n=k.links)||void 0===n?void 0:n[h])&&(null===(s=null===(o=k.links)||void 0===o?void 0:o[h].url)||void 0===s?void 0:s.message)})]}),(0,t.jsxs)(l.lX,{display:"flex",h:"1.6rem",fontSize:"sm",color:"#2D2D2D",children:[(0,t.jsx)(a.xu,{children:"\u30e9\u30d9\u30eb"}),(0,t.jsx)(a.xu,{color:"gray",children:"\uff08\u4efb\u610f\uff09"})]}),(0,t.jsx)(c.II,f({marginTop:"0.3rem",variant:"outline",borderColor:"#ACC1CA",w:"100%",h:"4.4rem",borderRightRadius:"10rem",borderLeftRadius:"10rem"},S("links.".concat(h,".label")),{defaultValue:m,onChange:function(e){y(e.target.value)},placeholder:"\u4f8b\uff09\u5bbf\u6cca\u5148"}))]})})]})})})},d=n(7294),h=function(e){var r=e.label,n=e.url,a=e.index,i=e.remove,u=(0,d.useState)(!1),l=u[0],c=u[1],s=(0,d.useState)(r),f=s[0],h=s[1],p=(0,d.useState)(n),v=p[0],b=p[1];return(0,t.jsx)(t.Fragment,{children:l?(0,t.jsx)(o,{label:f,url:v,onClick:function(){c(!1),v==f&&h("")}}):(0,t.jsx)(m,{label:f,url:v,index:a,formType:"create",remove:function(){i()},setCurrentLabel:h,setCurrentURL:b,setState:function(){c(!0)}})})}},1997:function(e,r,n){n.d(r,{t:function(){return y},j:function(){return D}});var t=n(4051),a=n.n(t),o=n(7294),i=n(7536),u=n(1153),l=n(5321),c=n(4480),s=n(3125),f=n(4231),m=n(5496),d=n(7375);function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function p(e,r,n,t,a,o,i){try{var u=e[o](i),l=u.value}catch(c){return void n(c)}u.done?r(l):Promise.resolve(l).then(t,a)}function v(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function i(e){p(o,t,a,i,u,"next",e)}function u(e){p(o,t,a,i,u,"throw",e)}i(void 0)}))}}function b(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(t=n.next()).done)&&(o.push(t.value),!r||o.length!==r);i=!0);}catch(l){u=!0,a=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return h(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=f.Ry({name:f.Z_().required("\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")}),y=function(){var e=(0,i.cI)({resolver:(0,m.X)(g)}),r=e.register,n=e.handleSubmit,t=e.formState.errors,f=(0,c.sJ)(s.y),h=(0,u.cF)(),p=(0,o.useState)(),y=p[0],x=p[1],w=(0,o.useState)(""),j=w[0],S=w[1],k=(0,o.useState)(""),C=k[0],I=k[1],A=(0,o.useState)(!1),R=A[0],O=A[1],E=b((0,d.kt)(),2),D=E[0],P=E[1];(0,o.useEffect)((function(){var e=function(){var e=v(a().mark((function e(){var r,n,t,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return r=(0,l.ad)(),n=(0,l.hJ)(r,"profiles"),t=(0,l.JU)(n,f.uid),e.next=7,(0,l.QT)(t);case 7:if(o=e.sent,i=o.data()){e.next=11;break}return e.abrupt("return");case 11:return I(i.icon),S(i.name),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var U=function(){var e=v(a().mark((function e(r){var n,t,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:if(n=(0,l.ad)(),t=(0,l.hJ)(n,"profiles"),o=(0,l.JU)(t,f.uid),""!=r.name||!r.icon){e.next=11;break}return I(r.icon),e.next=9,(0,l.r7)(o,{icon:r.icon});case 9:case 15:case 22:e.next=25;break;case 11:if(!r.name||""!=r.icon){e.next=17;break}return S(r.name),e.next=15,(0,l.r7)(o,{name:r.name});case 17:if(!r.name||!r.icon){e.next=24;break}return I(r.icon),S(r.name),e.next=22,(0,l.pl)(o,{name:r.name,icon:r.icon});case 24:return e.abrupt("return");case 25:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{onSubmit:function(e){try{if(P.on(),y){var r=(0,u.iH)(h,encodeURI(y.name));(0,u.KV)(r,y).then((function(){(0,u.Jt)(r).then((function(r){var n={name:e.name,icon:r};U(n)}))}))}else if(!y&&e.name){var n={name:e.name,icon:""};U(n),alert("\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f")}}catch(t){O(!0)}finally{P.off()}},handleSubmit:n,register:r,handleChangeIcon:function(e){null!==e.target.files&&x(e.target.files[0])},error:R,iconUrl:C,name:j,image:y,errors:t,disabled:D}},x=n(1163),w=n(5246);function j(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function S(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(t=n.next()).done)&&(o.push(t.value),!r||o.length!==r);i=!0);}catch(l){u=!0,a=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return j(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function C(e,r,n,t,a,o,i){try{var u=e[o](i),l=u.value}catch(c){return void n(c)}u.done?r(l):Promise.resolve(l).then(t,a)}function I(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function i(e){C(o,t,a,i,u,"next",e)}function u(e){C(o,t,a,i,u,"throw",e)}i(void 0)}))}}function A(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function R(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){A(e,r,n[r])}))}return e}function O(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(t=n.next()).done)&&(o.push(t.value),!r||o.length!==r);i=!0);}catch(l){u=!0,a=l}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return k(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=f.Ry({title:f.Z_().required("\u65c5\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),date:f.IX(),links:f.IX().of(f.Ry().shape({url:f.Z_().required("url\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").matches(/^(https?|ftp)(:\/\/[-_.!~*'()a-zA-Z0-9;/?:@&=+$,%#]+)/,{message:"\u5229\u7528\u53ef\u80fd\u306aURL\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),label:f.Z_()}))}),D=function(e,r,n){var t=O((0,d.kt)(),2),l=t[0],f=t[1],h=(0,x.useRouter)(),p=h.query.traveliId,v=null===r||void 0===r?void 0:r.date.map((function(e){return e?e.toDate():null})),b=(0,i.cI)({resolver:(0,m.X)(E),defaultValues:R({},r,{date:v})}),g=b.register,y=b.control,j=b.handleSubmit,k=b.formState.errors,C=function(){var e=(0,o.useState)(),r=e[0],n=e[1],t=S((0,d.kt)(),2),a=t[0],i=t[1];return{uploadImage:function(e){var r=(0,u.cF)(),n=(0,u.iH)(r,encodeURI(e.name));return(0,u.KV)(n,e).then((function(){return(0,u.Jt)(n)}))},image:r,handleChangeImage:function(e){null!==e.target.files&&(n(e.target.files[0]),i.on())},isImageChanged:a}}(),A=C.uploadImage,D=C.image,P=C.handleChangeImage,U=C.isImageChanged,L=(0,c.sJ)(s.y),J=w.h0,T=w.pz,_=(0,i.Dq)({name:"links",control:y}),F=_.fields,z=_.append,q=_.remove,B=function(){var r=I(a().mark((function r(n){var t,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(L){r.next=2;break}return r.abrupt("return");case 2:if(t=n,r.prev=3,f.on(),!D||!U){r.next=10;break}return r.next=8,A(D);case 8:o=r.sent,t.thumbnail=o;case 10:"create"===e?N(t,L):V(t,p),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),console.error(r.t0);case 16:return r.prev=16,f.off(),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[3,13,16,19]])})));return function(e){return r.apply(this,arguments)}}(),N=function(){var e=I(a().mark((function e(r,t){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,J(R({},r,{ownerIcon:n.icon,ownerName:n.name}),t.uid);case 4:o=e.sent,h.push(window.location.origin+o);case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),V=function(){var e=I(a().mark((function e(r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(r,n);case 2:h.push(window.location.origin+n);case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();return{register:g,handleSubmit:j,fields:F,append:z,remove:q,control:y,onSubmit:B,errors:k,disabled:l,handleChangeImage:P,image:D}}}}]);