"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{4723:function(e,r,n){n.d(r,{E:function(){return ne},r:function(){return q}});var t=n(5893),a=n(8527),i=n(6886),o=n(6723),u=n(9762),c=n(7657),l=n(1358),s=n(4612),f=n(1664),m=n.n(f),d=n(553),h=n(4051),p=n.n(h),b=n(7294),g=n(1163),y=n(7536),v=n(1153),x=n(5321),j=n(4480),w=n(7658),k=n(4231),S=n(5496),I=n(7375);function C(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function O(e,r,n,t,a,i,o){try{var u=e[i](o),c=u.value}catch(l){return void n(l)}u.done?r(c):Promise.resolve(c).then(t,a)}function E(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function o(e){O(i,t,a,o,u,"next",e)}function u(e){O(i,t,a,o,u,"throw",e)}o(void 0)}))}}function A(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);o=!0);}catch(c){u=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return C(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=k.Ry({name:k.Z_().required("\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")}),D=n(8484);function P(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function U(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);o=!0);}catch(c){u=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return P(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function L(e,r,n,t,a,i,o){try{var u=e[i](o),c=u.value}catch(l){return void n(l)}u.done?r(c):Promise.resolve(c).then(t,a)}function T(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function o(e){L(i,t,a,o,u,"next",e)}function u(e){L(i,t,a,o,u,"throw",e)}o(void 0)}))}}function Z(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function J(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){Z(e,r,n[r])}))}return e}function X(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);o=!0);}catch(c){u=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return z(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B=k.Ry({title:k.Z_().required("\u65c5\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),date:k.IX(),links:k.IX().of(k.Ry().shape({url:k.Z_().required("url\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").matches(/^(https?|ftp)(:\/\/[-_.!~*'()a-zA-Z0-9;/?:@&=+$,%#]+)/,{message:"\u5229\u7528\u53ef\u80fd\u306aURL\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),label:k.Z_()}))}),N=function(e,r){var n=X((0,I.kt)(),2),t=n[0],a=n[1],i=(0,b.useState)(e?e.links.map((function(e){return e.category})):[]),o=i[0],u=i[1],c=(0,g.useRouter)(),l=c.query.traveliId,s=null===e||void 0===e?void 0:e.date.map((function(e){return e?e.toDate():null})),f=(0,y.cI)({resolver:(0,S.X)(B),defaultValues:J({},e,{date:s||[null,null]})}),m=f.register,d=f.control,h=f.handleSubmit,x=f.formState.errors,k=function(){var e=(0,b.useState)(),r=e[0],n=e[1],t=U((0,I.kt)(),2),a=t[0],i=t[1];return{uploadImage:function(e){var r=(0,v.cF)(),n=(0,v.iH)(r,encodeURI(e.name));return(0,v.KV)(n,e).then((function(){return(0,v.Jt)(n)}))},image:r,handleChangeImage:function(e){null!==e.target.files&&(n(e.target.files[0]),i.on())},isImageChanged:a}}(),C=k.uploadImage,O=k.image,E=k.handleChangeImage,A=k.isImageChanged,R=(0,j.sJ)(w.y),P=D.h0,z=D.pz,L=(0,y.Dq)({name:"links",control:d}),Z=L.fields,N=L.append,_=L.remove,F=function(){var r=T(p().mark((function r(n){var t,i,u;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(R){r.next=2;break}return r.abrupt("return");case 2:if(t=n.links.map((function(e,r){return e.category=o[r],e})),i=J({},n,{links:t}),r.prev=4,a.on(),!O||!A){r.next=11;break}return r.next=9,C(O);case 9:u=r.sent,i.thumbnail=u;case 11:if(e){r.next=16;break}return r.next=14,q(i,R);case 14:r.next=18;break;case 16:return r.next=18,M(i,l);case 18:r.next=23;break;case 20:r.prev=20,r.t0=r.catch(4),console.error(r.t0);case 23:return r.prev=23,a.off(),r.finish(23);case 26:case"end":return r.stop()}}),r,null,[[4,20,23,26]])})));return function(e){return r.apply(this,arguments)}}(),q=function(){var e=T(p().mark((function e(n,t){var a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P(J({},n,{ownerIcon:r.icon,ownerName:r.name}),t.uid);case 4:a=e.sent,c.push("/".concat(a));case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),M=function(){var e=T(p().mark((function e(r,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(r,n);case 2:c.push("/".concat(n));case 3:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();return{register:m,handleSubmit:h,fields:Z,append:N,remove:_,control:d,onSubmit:F,errors:x,disabled:t,handleChangeImage:E,image:O,categories:o,setCategories:u}};function _(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function F(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){_(e,r,n[r])}))}return e}var q=function(){var e=(0,g.useRouter)(),r=function(){var e=(0,g.useRouter)(),r=(0,y.cI)({resolver:(0,S.X)(R)}),n=r.register,t=r.handleSubmit,a=r.formState.errors,i=(0,j.sJ)(w.f),o=(0,j.sJ)(w.y),u=(0,v.cF)(),c=(0,b.useState)(),l=c[0],s=c[1],f=(0,b.useState)(""),m=f[0],d=f[1],h=(0,b.useState)(""),k=h[0],C=h[1],O=(0,b.useState)(!1),D=O[0],P=O[1],U=A((0,I.kt)(),2),z=U[0],L=U[1];(0,b.useEffect)((function(){var e=function(){var e=E(p().mark((function e(){var r,n,t,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return r=(0,x.ad)(),n=(0,x.hJ)(r,"profiles"),t=(0,x.JU)(n,o.uid),e.next=7,(0,x.QT)(t);case 7:if(a=e.sent,i=a.data()){e.next=11;break}return e.abrupt("return");case 11:return C(i.icon),d(i.name),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var T=function(){var e=E(p().mark((function e(r){var n,t,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:if(n=(0,x.ad)(),t=(0,x.hJ)(n,"profiles"),a=(0,x.JU)(t,o.uid),""!=r.name||!r.icon){e.next=11;break}return C(r.icon),e.next=9,(0,x.r7)(a,{icon:r.icon});case 9:case 15:case 22:e.next=25;break;case 11:if(!r.name||""!=r.icon){e.next=17;break}return d(r.name),e.next=15,(0,x.r7)(a,{name:r.name});case 17:if(!r.name||!r.icon){e.next=24;break}return C(r.icon),d(r.name),e.next=22,(0,x.pl)(a,{name:r.name,icon:r.icon});case 24:return e.abrupt("return");case 25:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{onSubmit:function(r){try{if(L.on(),l){var n=(0,v.iH)(u,encodeURI(l.name));(0,v.KV)(n,l).then((function(){(0,v.Jt)(n).then((function(e){var n={name:r.name,icon:e};T(n)}))}))}else if(!l&&r.name){var t={name:r.name,icon:""};T(t)}"/"===i&&e.push("/home")}catch(a){P(!0)}finally{L.off()}},handleSubmit:t,register:n,handleChangeIcon:function(e){null!==e.target.files&&s(e.target.files[0])},error:D,iconUrl:k,name:m,image:l,errors:a,disabled:z}}(),n=r.onSubmit,f=r.handleSubmit,h=r.register,k=r.handleChangeIcon,C=r.error,O=r.iconUrl,D=r.name,P=r.image,U=r.disabled,z=(0,b.useRef)(null);return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(a.xu,{as:"form",height:"100vh",position:"relative",children:[C&&(0,t.jsx)(i.bZ,{children:"\u9001\u4fe1\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"}),(0,t.jsxs)(a.kC,{w:"100%",h:"6.3rem",justify:"center",align:"center",children:[(0,t.jsx)(m(),{href:e.basePath+"/home",passHref:!0,children:(0,t.jsx)(o.hU,{"aria-label":"return",size:"lg",icon:(0,t.jsx)(d.BK,{w:"2.2rem",h:"2.2rem"})})}),(0,t.jsx)(a.LZ,{}),(0,t.jsx)(a.xu,{color:"black",fontSize:"md",fontWeight:"bold",children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"}),(0,t.jsx)(a.LZ,{}),(0,t.jsx)(a.xu,{w:"2.2rem",h:"2.2rem"})]}),(0,t.jsxs)(u.NI,{children:[(0,t.jsx)(a.kC,{align:"center",justify:"center",children:(0,t.jsx)(a.xu,{borderRadius:"50%",filter:"drop-shadow(4px 4px 10px #E4EBEE);",marginBottom:"2.4rem",bgColor:"base",children:(0,t.jsx)(c.qE,{src:P?URL.createObjectURL(P):O,w:"12.9rem",h:"12.9rem",onClick:function(){var e;null===(e=z.current)||void 0===e||e.click()}})})}),(0,t.jsx)(l.by,{onChange:k,ref:z,id:"icon",type:"file",accept:"image/*"}),(0,t.jsx)(u.lX,{htmlFor:"name",fontSize:"md",children:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0"}),(0,t.jsx)(a.kC,{align:"center",justify:"center",children:(0,t.jsx)(s.II,F({variant:"filled",w:"34.4rem",h:"4.6rem",borderRightRadius:"10rem",borderLeftRadius:"10rem",bgColor:"white",filter:"drop-shadow(4px 4px 10px #E4EBEE)",id:"name",defaultValue:D},h("name")))})]}),(0,t.jsx)(o.zx,{position:"absolute",bottom:"12.9rem",right:"50%",transform:"translateX(50%)",disabled:U,variant:"round",onClick:f(n),children:"\u6c7a\u5b9a"})]})})},M=n(9033),$=(n(5828),n(9198)),K=n.n($),V=n(944);(0,$.registerLocale)("ja",V.Z);var H=function(e){var r=e.name,n=e.control;return(0,t.jsx)(y.Qr,{control:n,name:r,render:function(e){var r=e.field,n=r.onChange,a=r.value,i=void 0===a?[null,null]:a;return(0,t.jsx)(K(),{locale:V.Z,selectsRange:!0,dateFormat:"yyyy/MM/dd",onChange:n,startDate:i[0],endDate:i[1],withPortal:!0})}})},Q=n(6825),W=n(7768);function G(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Y(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function ee(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){Y(e,r,n[r])}))}return e}function re(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return G(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne=function(e){var r=e.travelinkData,n=e.ownerProfile,i=e.isOwner,o=N(r,n),c=o.register,f=o.handleSubmit,m=o.fields,h=o.append,p=o.remove,g=o.control,y=o.onSubmit,v=o.errors,x=o.disabled,j=o.image,w=o.handleChangeImage,k=o.setCategories,S=o.categories,I=(0,b.useRef)(null);return(0,t.jsxs)(a.xu,{children:[(0,t.jsxs)(a.kC,{w:"100%",h:"6.3rem",justify:"center",align:"center",children:[(0,t.jsx)(d.BK,{w:"2.2rem",h:"2.2rem"}),(0,t.jsx)(a.LZ,{}),(0,t.jsx)(a.xu,{color:"black",fontSize:"md",fontWeight:"bold",children:"\u65b0\u3057\u3044\u30c8\u30e9\u30d9\u30ea\u30f3\u30af\u3092\u4f5c\u6210"}),(0,t.jsx)(a.LZ,{}),(0,t.jsx)(a.xu,{w:"2.2rem",h:"2.2rem"})]}),(0,t.jsxs)(u.NI,{isInvalid:!!v.title,children:[(0,t.jsx)(u.lX,{marginTop:"1.5rem",fontSize:"sm",color:"#2D2D2D",children:"\u65c5\u306e\u540d\u524d"}),(0,t.jsx)(s.II,ee({variant:"filled",h:"4.6rem",marginTop:"0.8rem",borderRightRadius:"10rem",borderLeftRadius:"10rem",bgColor:"white",filter:"drop-shadow(0.4rem 0.4rem 1rem #E4EBEE)"},c("title"),{placeholder:"\u4f8b\uff09\u3068\u3082\u3060\u3061\u3068\u306e\u4e00\u6cca\u4e8c\u65e5\u306e\u65c5\u884c"})),(0,t.jsx)(u.J1,{children:v.title&&v.title.message})]}),(0,t.jsxs)(u.NI,{isInvalid:!!v.date,children:[(0,t.jsx)(u.lX,{marginTop:"1.6rem",fontSize:"sm",color:"#2D2D2D",children:"\u65e5\u6642\uff08\u4efb\u610f\uff09"}),(0,t.jsx)(H,{control:g,name:"date"})]}),(0,t.jsxs)(u.NI,{children:[(0,t.jsx)(u.lX,{marginTop:"1.6rem",fontSize:"sm",color:"#2D2D2D",children:"\u30b5\u30e0\u30cd\u30a4\u30eb\u753b\u50cf\uff08\u4efb\u610f\uff09"}),(0,t.jsx)(l.by,{ref:I,type:"file",accept:"image/*",onChange:w}),(0,t.jsx)(a.xu,{marginTop:"0.8rem",bgImage:j?URL.createObjectURL(j):"",onClick:function(){var e;null===(e=I.current)||void 0===e||e.click()},w:"100%",h:"12.9rem",borderRadius:"1rem",bgColor:"#D2D6E1",filter:"drop-shadow(0.4rem 0.4rem 1rem #E4EBEE)",children:(0,t.jsx)(a.kC,{h:"12.9rem",align:"center",justify:"center",children:(0,t.jsx)(d.Lj,{zIndex:1,w:"4.8rem",h:"4.8rem",color:"white"})})})]}),(0,t.jsx)(a.xu,{margin:"1.6rem 0 0.8rem 0",children:"\u30ea\u30f3\u30af"}),(0,t.jsxs)(u.NI,{children:[m.map((function(e,r){return(0,t.jsx)(b.Fragment,{children:(0,t.jsx)(Q.ak,{categories:S,setCategories:k,label:e.label,url:e.url,index:r,register:c,errors:v.links,remove:function(){p(r)}})},e.id)})),(0,t.jsxs)(a.kC,{align:"center",justify:"center",marginTop:"1.6rem",color:"brandBlue",children:[(0,t.jsx)(a.xu,{bgImage:"/images/plus.svg",w:"2.4rem",h:"2.4rem"}),(0,t.jsx)(a.xu,{as:"button",fontSize:"md",type:"button",onClick:function(){k((function(e){return re(e).concat(["\u305d\u306e\u4ed6"])})),h({url:"",label:""})},children:"\u30ea\u30b9\u30c8\u306e\u8ffd\u52a0"})]}),(i||!r)&&(0,t.jsxs)(u.NI,{display:"flex",alignItems:"center",paddingTop:"3rem",children:[(0,t.jsx)(M.r,ee({sx:{"--switch-track-width":"3.8rem","--switch-track-height":"2rem"},backgroundColor:"#e3e4e5",borderRadius:"full",marginRight:"2.2rem",colorScheme:"brandBlue-switch"},c("canEdit"),{defaultChecked:null===r||void 0===r?void 0:r.canEdit})),(0,t.jsx)(u.lX,{children:"\u4ed6\u306e\u30e6\u30fc\u30b6\u306b\u7de8\u96c6\u3092\u8a31\u53ef\u3059\u308b"})]})]}),(0,t.jsx)(a.kC,{justify:"center",margin:"3rem 0 3.5rem 0",children:(0,t.jsx)(W.zx,{disabled:x,variant:"round",onClick:f(y),children:r?(0,t.jsx)(t.Fragment,{children:"\u5909\u66f4\u3059\u308b"}):(0,t.jsx)(t.Fragment,{children:"\u4f5c\u6210\u3059\u308b"})})})]})}}}]);