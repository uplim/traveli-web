"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{8843:function(n,r,t){t.d(r,{Ef:function(){return Q},qM:function(){return U},h0:function(){return J},O2:function(){return l},Mt:function(){return L},BH:function(){return E},no:function(){return m},O_:function(){return b},pg:function(){return f},pz:function(){return A},Io:function(){return d}});var e=t(4051),u=t.n(e),o=t(7294),a=t(5321),i=t(4480),c=t(7658);function s(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}var f=function(){var n=(0,i.sJ)(c.y),r=(0,o.useState)(),t=r[0],e=r[1];return(0,o.useEffect)((function(){var r=function(){var r,t=(r=u().mark((function r(){var t,o,i,c;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:return t=(0,a.ad)(),o=(0,a.JU)((0,a.hJ)(t,"users"),n.uid),r.next=6,(0,a.QT)(o);case 6:i=r.sent,c=i.data(),e(c);case 9:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,u){var o=r.apply(n,t);function a(n){s(o,e,u,a,i,"next",n)}function i(n){s(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();r()}),[]),{user:t,currentUser:n}},v=t(1163);function p(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}var l=function(){var n=(0,v.useRouter)(),r=function(){var r,t=(r=u().mark((function r(t){var e,o,i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,a.ad)(),o=(0,a.hJ)(e,"users"),i=(0,a.JU)(o,t.uid),r.next=5,(0,a.QT)(i);case 5:return r.sent.exists()&&n.push("/home"),r.next=9,(0,a.pl)(i,{uid:t.uid,isAnonymous:t.isAnonymous,name:t.isAnonymous?"":t.providerData[0].displayName,icon:t.isAnonymous?"":t.providerData[0].photoURL});case 9:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,u){var o=r.apply(n,t);function a(n){p(o,e,u,a,i,"next",n)}function i(n){p(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(n){return t.apply(this,arguments)}}();return{createUser:r}};function h(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}var d=function(){var n,r=(n=u().mark((function n(r,t){var e,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,a.ad)(),o=(0,a.JU)((0,a.hJ)(e,"users"),t),n.prev=2,n.next=5,(0,a.r7)(o,r);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})),function(){var r=this,t=arguments;return new Promise((function(e,u){var o=n.apply(r,t);function a(n){h(o,e,u,a,i,"next",n)}function i(n){h(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(n,t){return r.apply(this,arguments)}}();function y(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}var m=function(){var n=(0,i.sJ)(c.y),r=(0,o.useState)(),t=r[0],e=r[1],s=(0,v.useRouter)(),f=s.query.traveliId;return(0,o.useEffect)((function(){if(n&&f){var r=function(){var n,r=(n=u().mark((function n(){var r,t,o,i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,a.ad)(),t=(0,a.JU)((0,a.hJ)(r,"travelinks"),f),n.next=4,(0,a.QT)(t);case 4:if((o=n.sent).exists()){n.next=9;break}return n.next=8,s.push("/404");case 8:return n.abrupt("return");case 9:i=o.data(),e(i);case 11:case"end":return n.stop()}}),n)})),function(){var r=this,t=arguments;return new Promise((function(e,u){var o=n.apply(r,t);function a(n){y(o,e,u,a,i,"next",n)}function i(n){y(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();r()}}),[]),{travelink:t}};function w(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}var b=function(){var n=(0,i.sJ)(c.y),r=(0,o.useState)([]),t=r[0],e=r[1];return(0,o.useEffect)((function(){if(n){var r=function(){var r,t=(r=u().mark((function r(){var t,o,i,c,s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=(0,a.ad)(),o=(0,a.hJ)(t,"travelinks"),i=(0,a.IO)(o,(0,a.ar)("ownerId","==",n.uid)),r.next=5,(0,a.PL)(i);case 5:c=r.sent,s=c.docs.map((function(n){return n.data()})),e(s);case 8:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,u){var o=r.apply(n,t);function a(n){w(o,e,u,a,i,"next",n)}function i(n){w(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();r()}}),[]),{travelinkList:t}};function x(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}function k(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function P(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},e=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),e.forEach((function(r){k(n,r,t[r])}))}return n}var J=function(){var n,r=(n=u().mark((function n(r,t){var e,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,a.ad)(),o=(0,a.JU)((0,a.hJ)(e,"travelinks")),n.next=4,(0,a.pl)(o,P({},r,{id:o.id,ownerId:t,createdAt:(0,a.Bt)(),updatedAt:(0,a.Bt)()}));case 4:return n.abrupt("return",o.id);case 5:case"end":return n.stop()}}),n)})),function(){var r=this,t=arguments;return new Promise((function(e,u){var o=n.apply(r,t);function a(n){x(o,e,u,a,i,"next",n)}function i(n){x(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(n,t){return r.apply(this,arguments)}}();function O(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}function g(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function j(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},e=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),e.forEach((function(r){g(n,r,t[r])}))}return n}var A=function(){var n,r=(n=u().mark((function n(r,t){var e,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,a.ad)(),o=(0,a.JU)((0,a.hJ)(e,"travelinks"),t),n.next=4,(0,a.r7)(o,j({},r,{updatedAt:(0,a.Bt)()}));case 4:case"end":return n.stop()}}),n)})),function(){var r=this,t=arguments;return new Promise((function(e,u){var o=n.apply(r,t);function a(n){O(o,e,u,a,i,"next",n)}function i(n){O(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(n,t){return r.apply(this,arguments)}}();function S(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}var U=function(){var n,r=(n=u().mark((function n(r,t,e){var o,i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=(0,a.ad)(),i=(0,a.JU)((0,a.hJ)(o,"users",r,"bookmarks"),t),n.prev=2,n.next=5,(0,a.pl)(i,{thumbnail:e.thumbnail,date:e.date,title:e.title,id:e.id,ownerIcon:e.ownerIcon,ownerName:e.ownerName});case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error("\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f");case 10:case"end":return n.stop()}}),n,null,[[2,7]])})),function(){var r=this,t=arguments;return new Promise((function(e,u){var o=n.apply(r,t);function a(n){S(o,e,u,a,i,"next",n)}function i(n){S(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(n,t,e){return r.apply(this,arguments)}}();function I(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}var E=function(){var n=(0,i.sJ)(c.y),r=(0,o.useState)([]),t=r[0],e=r[1];return(0,o.useEffect)((function(){if(n){var r=function(){var r,t=(r=u().mark((function r(){var t,o,i,c;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=(0,a.ad)(),o=(0,a.hJ)(t,"users",n.uid,"bookmarks"),r.next=4,(0,a.PL)(o);case 4:i=r.sent,c=i.docs.map((function(n){return n.data()})),e(c);case 7:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,u){var o=r.apply(n,t);function a(n){I(o,e,u,a,i,"next",n)}function i(n){I(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();r()}}),[]),{bookmarkList:t}};function B(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}var L=function(){var n,r=(n=u().mark((function n(r,t){var e,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,a.ad)(),o=(0,a.JU)((0,a.hJ)(e,"users",r,"bookmarks"),t),n.prev=2,n.next=5,(0,a.oe)(o);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error("\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f");case 10:case"end":return n.stop()}}),n,null,[[2,7]])})),function(){var r=this,t=arguments;return new Promise((function(e,u){var o=n.apply(r,t);function a(n){B(o,e,u,a,i,"next",n)}function i(n){B(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(n,t){return r.apply(this,arguments)}}(),N=t(7375);function T(n,r){(null==r||r>n.length)&&(r=n.length);for(var t=0,e=new Array(r);t<r;t++)e[t]=n[t];return e}function _(n,r,t,e,u,o,a){try{var i=n[o](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,u)}function D(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var e,u,o=[],a=!0,i=!1;try{for(t=t.call(n);!(a=(e=t.next()).done)&&(o.push(e.value),!r||o.length!==r);a=!0);}catch(c){i=!0,u=c}finally{try{a||null==t.return||t.return()}finally{if(i)throw u}}return o}}(n,r)||function(n,r){if(!n)return;if("string"===typeof n)return T(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(n,r)}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=function(){var n=(0,v.useRouter)(),r=D((0,N.kt)(),2),t=r[0],e=r[1],s=n.query.traveliId,f=(0,i.sJ)(c.y);return(0,o.useEffect)((function(){if(f){var n=function(){var n,r=(n=u().mark((function n(){var r,t;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,a.ad)(),t=(0,a.JU)((0,a.hJ)(r,"users",f.uid,"bookmarks"),s),n.next=4,(0,a.QT)(t);case 4:n.sent.exists()?e.on():e.off();case 6:case"end":return n.stop()}}),n)})),function(){var r=this,t=arguments;return new Promise((function(e,u){var o=n.apply(r,t);function a(n){_(o,e,u,a,i,"next",n)}function i(n){_(o,e,u,a,i,"throw",n)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();n()}}),[]),{isBookmarked:t,setIsBookmarked:e}}}}]);