"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{8843:function(n,r,t){t.d(r,{Ef:function(){return _},qM:function(){return I},h0:function(){return J},O2:function(){return l},Mt:function(){return D},BH:function(){return E},no:function(){return m},O_:function(){return b},pg:function(){return f},pz:function(){return S},Io:function(){return d}});var e=t(4051),o=t.n(e),u=t(7294),a=t(5321),i=t(4480),c=t(7658);function s(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}var f=function(){var n=(0,i.sJ)(c.y),r=(0,u.useState)(),t=r[0],e=r[1];return(0,u.useEffect)((function(){var r=function(){var r,t=(r=o().mark((function r(){var t,u,i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:return t=(0,a.ad)(),u=(0,a.JU)((0,a.hJ)(t,"users"),n.uid),r.next=6,(0,a.QT)(u);case 6:i=r.sent,c=i.data(),e(c);case 9:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,o){var u=r.apply(n,t);function a(n){s(u,e,o,a,i,"next",n)}function i(n){s(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();r()}),[]),{user:t}},v=t(1163);function p(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}var l=function(){var n=(0,v.useRouter)(),r=function(){var r,t=(r=o().mark((function r(t){var e,u,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,a.ad)(),u=(0,a.hJ)(e,"users"),i=(0,a.JU)(u,t.uid),r.next=5,(0,a.QT)(i);case 5:return r.sent.exists()&&n.push("/home"),r.next=9,(0,a.pl)(i,{uid:t.uid,isAnonymous:t.isAnonymous,name:t.providerData[0].displayName?t.providerData[0].displayName:"",icon:t.providerData[0].photoURL?t.providerData[0].photoURL:""});case 9:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,o){var u=r.apply(n,t);function a(n){p(u,e,o,a,i,"next",n)}function i(n){p(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(n){return t.apply(this,arguments)}}();return{createUser:r}};function h(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}var d=function(){var n,r=(n=o().mark((function n(r,t){var e,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,a.ad)(),u=(0,a.JU)((0,a.hJ)(e,"users"),t),n.prev=2,n.next=5,(0,a.r7)(u,r);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})),function(){var r=this,t=arguments;return new Promise((function(e,o){var u=n.apply(r,t);function a(n){h(u,e,o,a,i,"next",n)}function i(n){h(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(n,t){return r.apply(this,arguments)}}();function y(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}var m=function(){var n=(0,i.sJ)(c.y),r=(0,u.useState)(),t=r[0],e=r[1],s=(0,v.useRouter)(),f=s.query.traveliId;return(0,u.useEffect)((function(){if(n&&f){var r=function(){var n,r=(n=o().mark((function n(){var r,t,u,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,a.ad)(),t=(0,a.JU)((0,a.hJ)(r,"travelinks"),f),n.next=4,(0,a.QT)(t);case 4:if((u=n.sent).exists()){n.next=9;break}return n.next=8,s.push("/404");case 8:return n.abrupt("return");case 9:i=u.data(),e(i);case 11:case"end":return n.stop()}}),n)})),function(){var r=this,t=arguments;return new Promise((function(e,o){var u=n.apply(r,t);function a(n){y(u,e,o,a,i,"next",n)}function i(n){y(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();r()}}),[]),{travelink:t}};function w(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}var b=function(){var n=(0,i.sJ)(c.y),r=(0,u.useState)([]),t=r[0],e=r[1];return(0,u.useEffect)((function(){if(n){var r=function(){var r,t=(r=o().mark((function r(){var t,u,i,c,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=(0,a.ad)(),u=(0,a.hJ)(t,"travelinks"),i=(0,a.IO)(u,(0,a.ar)("ownerId","==",n.uid)),r.next=5,(0,a.PL)(i);case 5:c=r.sent,s=c.docs.map((function(n){return n.data()})),e(s);case 8:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,o){var u=r.apply(n,t);function a(n){w(u,e,o,a,i,"next",n)}function i(n){w(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();r()}}),[]),{travelinkList:t}};function x(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}function k(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function P(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},e=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),e.forEach((function(r){k(n,r,t[r])}))}return n}var J=function(){var n,r=(n=o().mark((function n(r,t){var e,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,a.ad)(),u=(0,a.JU)((0,a.hJ)(e,"travelinks")),n.next=4,(0,a.pl)(u,P({},r,{id:u.id,ownerId:t,createdAt:(0,a.Bt)(),updatedAt:(0,a.Bt)()}));case 4:return n.abrupt("return",u.id);case 5:case"end":return n.stop()}}),n)})),function(){var r=this,t=arguments;return new Promise((function(e,o){var u=n.apply(r,t);function a(n){x(u,e,o,a,i,"next",n)}function i(n){x(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(n,t){return r.apply(this,arguments)}}();function O(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}function g(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function j(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},e=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),e.forEach((function(r){g(n,r,t[r])}))}return n}var S=function(){var n,r=(n=o().mark((function n(r,t){var e,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,a.ad)(),u=(0,a.JU)((0,a.hJ)(e,"travelinks"),t),n.next=4,(0,a.r7)(u,j({},r,{updatedAt:(0,a.Bt)()}));case 4:case"end":return n.stop()}}),n)})),function(){var r=this,t=arguments;return new Promise((function(e,o){var u=n.apply(r,t);function a(n){O(u,e,o,a,i,"next",n)}function i(n){O(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(n,t){return r.apply(this,arguments)}}();function U(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}var I=function(){var n,r=(n=o().mark((function n(r,t,e){var u,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=(0,a.ad)(),i=(0,a.JU)((0,a.hJ)(u,"users",r,"bookmarks"),t),n.prev=2,n.next=5,(0,a.pl)(i,{thumbnail:e.thumbnail,date:e.date,title:e.title,id:e.id,ownerIcon:e.ownerIcon,ownerName:e.ownerName});case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error("\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f");case 10:case"end":return n.stop()}}),n,null,[[2,7]])})),function(){var r=this,t=arguments;return new Promise((function(e,o){var u=n.apply(r,t);function a(n){U(u,e,o,a,i,"next",n)}function i(n){U(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(n,t,e){return r.apply(this,arguments)}}();function A(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}var E=function(){var n=(0,i.sJ)(c.y),r=(0,u.useState)([]),t=r[0],e=r[1];return(0,u.useEffect)((function(){if(n){var r=function(){var r,t=(r=o().mark((function r(){var t,u,i,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=(0,a.ad)(),u=(0,a.hJ)(t,"users",n.uid,"bookmarks"),r.next=4,(0,a.PL)(u);case 4:i=r.sent,c=i.docs.map((function(n){return n.data()})),e(c);case 7:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,o){var u=r.apply(n,t);function a(n){A(u,e,o,a,i,"next",n)}function i(n){A(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();r()}}),[]),{bookmarkList:t}};function B(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}var D=function(){var n,r=(n=o().mark((function n(r,t){var e,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,a.ad)(),u=(0,a.JU)((0,a.hJ)(e,"users",r,"bookmarks"),t),n.prev=2,n.next=5,(0,a.oe)(u);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error("\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f");case 10:case"end":return n.stop()}}),n,null,[[2,7]])})),function(){var r=this,t=arguments;return new Promise((function(e,o){var u=n.apply(r,t);function a(n){B(u,e,o,a,i,"next",n)}function i(n){B(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(n,t){return r.apply(this,arguments)}}(),L=t(7375);function N(n,r){(null==r||r>n.length)&&(r=n.length);for(var t=0,e=new Array(r);t<r;t++)e[t]=n[t];return e}function R(n,r,t,e,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?r(c):Promise.resolve(c).then(e,o)}function T(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var e,o,u=[],a=!0,i=!1;try{for(t=t.call(n);!(a=(e=t.next()).done)&&(u.push(e.value),!r||u.length!==r);a=!0);}catch(c){i=!0,o=c}finally{try{a||null==t.return||t.return()}finally{if(i)throw o}}return u}}(n,r)||function(n,r){if(!n)return;if("string"===typeof n)return N(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(n,r)}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(){var n=(0,v.useRouter)(),r=T((0,L.kt)(),2),t=r[0],e=r[1],s=n.query.traveliId,f=(0,i.sJ)(c.y);return(0,u.useEffect)((function(){if(f){var n=function(){var n,r=(n=o().mark((function n(){var r,t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,a.ad)(),t=(0,a.JU)((0,a.hJ)(r,"users",f.uid,"bookmarks"),s),n.next=4,(0,a.QT)(t);case 4:n.sent.exists()?e.on():e.off();case 6:case"end":return n.stop()}}),n)})),function(){var r=this,t=arguments;return new Promise((function(e,o){var u=n.apply(r,t);function a(n){R(u,e,o,a,i,"next",n)}function i(n){R(u,e,o,a,i,"throw",n)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();n()}}),[]),{isBookmarked:t,setIsBookmarked:e}}}}]);